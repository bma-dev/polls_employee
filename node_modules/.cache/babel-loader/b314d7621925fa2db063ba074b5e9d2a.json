{"ast":null,"code":"var _jsxFileName = \"/Users/amine/Desktop/React-Nanodegree/Final Project/bma_polls/polls_employee/src/components/PollPage.js\",\n    _s = $RefreshSig$();\n\nimport { connect } from \"react-redux\";\nimport { Navigate, useNavigate, useParams } from \"react-router-dom\";\nimport { handleAddAnswer } from \"../actions/questions\";\nimport \"./PollPage.css\";\nimport Error404 from \".././components/404\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst PollPage = _ref => {\n  _s();\n\n  let {\n    dispatch,\n    authedUser,\n    question,\n    author\n  } = _ref;\n  const navigate = useNavigate();\n\n  if (!question) {\n    return /*#__PURE__*/_jsxDEV(Error404, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 11,\n      columnNumber: 12\n    }, this);\n  }\n\n  const hasVotedForOptionOne = question.optionOne.votes.includes(authedUser.id);\n  const hasVotedForOptionTwo = question.optionTwo.votes.includes(authedUser.id);\n  const hasVoted = hasVotedForOptionOne || hasVotedForOptionTwo;\n\n  const handleOptionOne = e => {\n    e.preventDefault();\n    dispatch(handleAddAnswer(question.id, \"optionOne\"));\n    navigate(\"/\");\n  };\n\n  const handleOptionTwo = e => {\n    e.preventDefault();\n    dispatch(handleAddAnswer(question.id, \"optionTwo\"));\n    navigate(\"/\");\n  };\n\n  const calcPercentage = (option, question) => {\n    const numberVotesTotal = question.optionOne.votes.length + question.optionTwo.votes.length;\n\n    switch (option) {\n      case \"optionOne\":\n        return question.optionOne.votes.length / numberVotesTotal * 100 + \" %\";\n\n      case \"optionTwo\":\n        return question.optionTwo.votes.length / numberVotesTotal * 100 + \" %\";\n\n      default:\n        return \"\";\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"ml-4\",\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      className: \"text-3xl font-bold mt-9\",\n      children: [\"Poll by \", author.id]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex justify-center\",\n      children: /*#__PURE__*/_jsxDEV(\"img\", {\n        src: author.avatarURL,\n        alt: \"Profile\",\n        className: \"h-24 w-24\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 52,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex justify-center\",\n      children: /*#__PURE__*/_jsxDEV(\"h2\", {\n        className: \"text-2xl font-bold mt-6\",\n        children: \"Would you rather?\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"grid grid-cols-2 gap-4 mt-4\",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handleOptionOne,\n        disabled: hasVoted,\n        className: \"p-2 rounded-xl bg-zinc-100 hover:shadow-xl transition \" + (hasVotedForOptionOne ? \"bg-lime-400\" : \"\"),\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: hasVotedForOptionOne ? \"chosen\" : \"\",\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"font-bold mb-2\",\n            children: question.optionOne.text\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 69,\n            columnNumber: 13\n          }, this), !hasVoted && /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"underline underline-offset-4 mb-3\",\n            children: \"Click\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 71,\n            columnNumber: 15\n          }, this), hasVoted && /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-xs\",\n            children: [\"Votes: \", question.optionOne.votes.length, \" (\", calcPercentage(\"optionOne\", question), \")\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 74,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 68,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handleOptionTwo,\n        disabled: hasVoted,\n        className: \"p-2 rounded-xl bg-zinc-100 hover:shadow-xl transition \" + (hasVotedForOptionTwo ? \"bg-lime-400\" : \"\"),\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"font-bold mb-2\",\n          children: question.optionTwo.text\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 90,\n          columnNumber: 11\n        }, this), !hasVoted && /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"underline underline-offset-4 mb-3\",\n          children: \"Click\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 13\n        }, this), hasVoted && /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-xs\",\n          children: [\"Votes: \", question.optionTwo.votes.length, \" (\", calcPercentage(\"optionTwo\", question), \")\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 48,\n    columnNumber: 5\n  }, this);\n};\n\n_s(PollPage, \"CzcTeTziyjMsSrAVmHuCCb6+Bfg=\", false, function () {\n  return [useNavigate];\n});\n\n_c = PollPage;\n\nconst mapStateToProps = _ref2 => {\n  var _s2 = $RefreshSig$();\n\n  let {\n    authedUser,\n    users,\n    questions\n  } = _ref2;\n\n  const question = _s2(Object.values(questions).find(_s2(question => {\n    _s2();\n\n    return question.id === useParams().id;\n  }, \"zmUErVVHtqqM6DIDQ9M8H17P2nM=\", false, function () {\n    return [useParams];\n  })), \"zmUErVVHtqqM6DIDQ9M8H17P2nM=\", false, function () {\n    return [useParams];\n  });\n\n  const author = Object.values(users).find(user => user.id === question.author);\n  return {\n    authedUser,\n    question,\n    author\n  };\n};\n\nexport default connect(mapStateToProps)(PollPage);\n\nvar _c;\n\n$RefreshReg$(_c, \"PollPage\");","map":{"version":3,"names":["connect","Navigate","useNavigate","useParams","handleAddAnswer","Error404","PollPage","dispatch","authedUser","question","author","navigate","hasVotedForOptionOne","optionOne","votes","includes","id","hasVotedForOptionTwo","optionTwo","hasVoted","handleOptionOne","e","preventDefault","handleOptionTwo","calcPercentage","option","numberVotesTotal","length","avatarURL","text","mapStateToProps","users","questions","Object","values","find","user"],"sources":["/Users/amine/Desktop/React-Nanodegree/Final Project/bma_polls/polls_employee/src/components/PollPage.js"],"sourcesContent":["import { connect } from \"react-redux\";\nimport { Navigate, useNavigate, useParams } from \"react-router-dom\";\nimport { handleAddAnswer } from \"../actions/questions\";\nimport \"./PollPage.css\";\nimport Error404 from \".././components/404\";\n\nconst PollPage = ({ dispatch, authedUser, question, author }) => {\n  const navigate = useNavigate();\n\n  if (!question) {\n    return <Error404 />;\n  }\n\n  const hasVotedForOptionOne = question.optionOne.votes.includes(authedUser.id);\n  const hasVotedForOptionTwo = question.optionTwo.votes.includes(authedUser.id);\n  const hasVoted = hasVotedForOptionOne || hasVotedForOptionTwo;\n\n  const handleOptionOne = (e) => {\n    e.preventDefault();\n    dispatch(handleAddAnswer(question.id, \"optionOne\"));\n    navigate(\"/\");\n  };\n\n  const handleOptionTwo = (e) => {\n    e.preventDefault();\n    dispatch(handleAddAnswer(question.id, \"optionTwo\"));\n    navigate(\"/\");\n  };\n\n  const calcPercentage = (option, question) => {\n    const numberVotesTotal =\n      question.optionOne.votes.length + question.optionTwo.votes.length;\n    switch (option) {\n      case \"optionOne\":\n        return (\n          (question.optionOne.votes.length / numberVotesTotal) * 100 + \" %\"\n        );\n      case \"optionTwo\":\n        return (\n          (question.optionTwo.votes.length / numberVotesTotal) * 100 + \" %\"\n        );\n      default:\n        return \"\";\n    }\n  };\n\n  return (\n    <div className=\"ml-4\">\n      <h1 className=\"text-3xl font-bold mt-9\">Poll by {author.id}</h1>\n\n      <div className=\"flex justify-center\">\n        <img src={author.avatarURL} alt=\"Profile\" className=\"h-24 w-24\" />\n      </div>\n\n      <div className=\"flex justify-center\">\n        <h2 className=\"text-2xl font-bold mt-6\">Would you rather?</h2>\n      </div>\n\n      <div className=\"grid grid-cols-2 gap-4 mt-4\">\n        <button\n          onClick={handleOptionOne}\n          disabled={hasVoted}\n          className={\n            \"p-2 rounded-xl bg-zinc-100 hover:shadow-xl transition \" +\n            (hasVotedForOptionOne ? \"bg-lime-400\" : \"\")\n          }\n        >\n          <div className={hasVotedForOptionOne ? \"chosen\" : \"\"}>\n            <p className=\"font-bold mb-2\">{question.optionOne.text}</p>\n            {!hasVoted && (\n              <p className=\"underline underline-offset-4 mb-3\">Click</p>\n            )}\n            {hasVoted && (\n              <p className=\"text-xs\">\n                Votes: {question.optionOne.votes.length} (\n                {calcPercentage(\"optionOne\", question)})\n              </p>\n            )}\n          </div>\n        </button>\n\n        <button\n          onClick={handleOptionTwo}\n          disabled={hasVoted}\n          className={\n            \"p-2 rounded-xl bg-zinc-100 hover:shadow-xl transition \" +\n            (hasVotedForOptionTwo ? \"bg-lime-400\" : \"\")\n          }\n        >\n          <p className=\"font-bold mb-2\">{question.optionTwo.text}</p>\n          {!hasVoted && (\n            <p className=\"underline underline-offset-4 mb-3\">Click</p>\n          )}\n          {hasVoted && (\n            <p className=\"text-xs\">\n              Votes: {question.optionTwo.votes.length} (\n              {calcPercentage(\"optionTwo\", question)})\n            </p>\n          )}\n        </button>\n      </div>\n    </div>\n  );\n};\n\nconst mapStateToProps = ({ authedUser, users, questions }) => {\n  const question = Object.values(questions).find(\n    (question) => question.id === useParams().id\n  );\n  const author = Object.values(users).find(\n    (user) => user.id === question.author\n  );\n  return { authedUser, question, author };\n};\n\nexport default connect(mapStateToProps)(PollPage);\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}